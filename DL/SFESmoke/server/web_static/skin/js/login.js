"use strict";var me={login:function(){var e=document.getElementById("btn");require(["../module/local","../module/code"],function(o,t){var n=new GVerify({id:"code__container",type:"number"});o.setLocalStorage("user",""),o.setLocalStorage("password",""),me.getSystemName(),e.onclick=function(){me.go(n)},document.onkeydown=function(e){var o=e||window.event||arguments.callee.caller.arguments[0];o&&13==o.keyCode&&me.go(n)}})},go:function(e){var o=document.getElementById("account"),t=document.getElementById("password"),n=document.getElementById("code");require(["../module/ajax","../module/prompt","../module/loading","../module/local","../module/code","../module/md5"],function(r,u,c,a,i,d){var s=o.value,m=d.hex_md5(t.value),l=n.value;return s?m?e.validate(l)?(c.show(),void r.data({method:"POST",url:"/api/login",type:"JSON",request:"json",user:s,password:m,data:{user:s,password:m,v:Math.ceil(1e6*Math.random())},success:function(e){e.success?(a.setLocalStorage("user",s),a.setLocalStorage("password",m),setTimeout(function(){location.href="/index.html"},1e3)):setTimeout(function(){return c.hide(function(){u.errorShow("请输入正确的用户名和密码",function(){})}),!1},1e3)},error:function(){return c.hide(function(){u.errorShow("网络错误",function(){})}),!1}})):(u.errorShow("请输入正确的验证码",function(){n.focus()}),!1):(u.errorShow("请输入正确的用户名和密码",function(){t.focus()}),!1):(u.errorShow("请输入正确的用户名和密码",function(){o.focus()}),!1)})},getSystemName:function(){require(["../module/ajax","../module/prompt"],function(e,o){e.data({method:"GET",url:"/api/server_name",type:"JSON",success:function(e){e.success?document.getElementsByTagName("title")[0].innerHTML=e.content:setTimeout(function(){return o.errorShow(e.content,function(){}),!1},1e3)},error:function(){return o.errorShow("网络错误",function(){}),!1}})})}};me.login();