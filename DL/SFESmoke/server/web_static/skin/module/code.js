!function(t,i){function o(t){if(this.options={id:"",canvasId:"verifyCanvas",width:"100",height:"30",type:"blend",code:""},"[object Object]"==Object.prototype.toString.call(t))for(var i in t)this.options[i]=t[i];else this.options.id=t;this.options.numArr="0,1,2,3,4,5,6,7,8,9".split(","),this.options.letterArr=e(),this._init(),this.refresh()}function e(){return"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z".split(",")}function s(t,i){return Math.floor(Math.random()*(i-t)+t)}function n(t,i){return"rgb("+s(t,i)+","+s(t,i)+","+s(t,i)+")"}o.prototype={version:"1.0.0",_init:function(){var t=i.getElementById(this.options.id),o=i.createElement("canvas");this.options.width=t.offsetWidth>0?t.offsetWidth:"100",this.options.height=t.offsetHeight>0?t.offsetHeight:"30",o.id=this.options.canvasId,o.width=this.options.width,o.height=this.options.height,o.style.cursor="pointer",o.innerHTML="您的浏览器版本不支持canvas",t.appendChild(o);var e=this;o.onclick=function(){e.refresh()}},refresh:function(){this.options.code="";var t,o=i.getElementById(this.options.canvasId);if(o.getContext){var e=o.getContext("2d");if(e.textBaseline="middle",e.fillStyle=n(180,240),e.fillRect(0,0,this.options.width,this.options.height),"blend"==this.options.type)h=this.options.numArr.concat(this.options.letterArr);else if("number"==this.options.type)h=this.options.numArr;else var h=this.options.letterArr;for(t=1;t<=5;t++){var r=h[s(0,h.length)];this.options.code+=r,e.font=s(this.options.height/2,this.options.height)+"px SimHei",e.fillStyle=n(50,160),e.shadowOffsetX=s(-3,3),e.shadowOffsetY=s(-3,3),e.shadowBlur=s(-3,3),e.shadowColor="rgba(0, 0, 0, 0.3)";var a=this.options.width/6*t,p=this.options.height/2,l=s(-30,30);e.translate(a,p),e.rotate(l*Math.PI/180),e.fillText(r,0,0),e.rotate(-l*Math.PI/180),e.translate(-a,-p)}for(t=0;t<4;t++)e.strokeStyle=n(40,180),e.beginPath(),e.moveTo(s(0,this.options.width),s(0,this.options.height)),e.lineTo(s(0,this.options.width),s(0,this.options.height)),e.stroke();for(t=0;t<this.options.width/4;t++)e.fillStyle=n(0,255),e.beginPath(),e.arc(s(0,this.options.width),s(0,this.options.height),1,0,2*Math.PI),e.fill()}},validate:function(t){return(t=t.toLowerCase())==this.options.code.toLowerCase()||(this.refresh(),!1)}},t.GVerify=o}(window,document);