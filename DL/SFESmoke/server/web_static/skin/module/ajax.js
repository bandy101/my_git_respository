"use strict";define(function(){var data=function(opt){opt=opt||{},opt.method=opt.method.toUpperCase()||"POST",opt.url=opt.url||"",opt.token=opt.token||"",opt.type=opt.type||"HTML",opt.user=opt.user||"",opt.password=opt.password||"",opt.request=opt.request||"x-www-form-urlencoded",opt.async=opt.async||!0,opt.data=opt.data||null,opt.success=opt.success||function(){},opt.error=opt.error||function(){};var xmlHttp=null;xmlHttp=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var postData="";switch(opt.request){case"json":postData=JSON.stringify(opt.data);break;default:var params=[];for(var key in opt.data)if("all"==key){var array,i,arrayLength;for(array=opt.data[key].split(","),arrayLength=array.length,i=0;i<arrayLength;i++)params.push(array[i])}else params.push(key+"="+opt.data[key]);postData=params.join("&")}switch(opt.method.toUpperCase()){case"POST":case"DELETE":case"PUT":xmlHttp.open(opt.method,opt.url,opt.async,opt.request,opt.user,opt.password),xmlHttp.setRequestHeader("Content-Type","application/"+opt.request+";charset=utf-8"),xmlHttp.send(postData);break;case"GET":""==postData?xmlHttp.open(opt.method,opt.url,opt.async,opt.user,opt.password):xmlHttp.open(opt.method,opt.url+"?"+postData,opt.async,opt.user,opt.password),xmlHttp.send()}xmlHttp.onreadystatechange=function(){if(200==xmlHttp.status){if(4==xmlHttp.readyState)switch(opt.type){case"JSON":opt.success(eval("("+xmlHttp.responseText+")"));break;default:opt.success(xmlHttp.responseText)}}else opt.error()}};return{data:data}});